# Pose WOW!

AIを使ったリアルタイムポーズ検出アプリケーション。カメラに向かって両手を上げると「WOW!」の吹き出しが表示されます。

## 機能

- **リアルタイムポーズ検出**: MediaPipe AIを使用してカメラ映像から人の姿勢を検出
- **インタラクティブなフィードバック**: 両手を上げると画面に「WOW!」の吹き出しが表示
- **視覚的なポーズトラッキング**: 体の主要ポイントと骨格線を色付きで表示
- **レスポンシブデザイン**: デスクトップとモバイルの両方に対応

## 技術スタック

- **React 18** - UIフレームワーク
- **TypeScript** - 型安全な開発
- **Vite** - 高速ビルドツール
- **Tailwind CSS** - スタイリング
- **MediaPipe Tasks Vision** - AIポーズ検出
- **Lucide React** - アイコン

## 必要な環境

- Node.js 18以上
- npm または yarn
- Webカメラ
- HTTPS対応のブラウザ（Chrome、Firefox、Safari、Edge推奨）

## ローカルPCでの動作確認方法

### 1. リポジトリのクローン

```bash
git clone <repository-url>
cd <project-directory>
```

### 2. 依存関係のインストール

```bash
npm install
```

### 3. 開発サーバーの起動

```bash
npm run dev
```

ターミナルに表示されるローカルURLにアクセスします（通常は `http://localhost:5173`）。

### 4. カメラの許可

ブラウザがカメラへのアクセスを求めてくるので、「許可」をクリックしてください。

### 5. ポーズ検出を試す

- カメラに向かって立ち、全身が映るように調整します
- 両手を頭の上まで上げてみてください
- 画面に「WOW!」の吹き出しが表示されます

### トラブルシューティング

**カメラが起動しない場合:**
- ブラウザの設定でカメラの権限が許可されているか確認
- 他のアプリケーションがカメラを使用していないか確認
- HTTPSでアクセスしているか確認（localhostは例外）

**ポーズが検出されない場合:**
- 部屋の明るさを確認（明るい場所で使用）
- カメラから適切な距離を保つ（1〜2メートル）
- 全身がカメラに映っているか確認

**エラーメッセージが表示される場合:**
- ブラウザのコンソール（F12キー）でエラー詳細を確認
- ネットワーク接続を確認（MediaPipeモデルのダウンロードに必要）

## その他のコマンド

### ビルド（本番環境用）

```bash
npm run build
```

ビルドされたファイルは `dist` フォルダに出力されます。

### プレビュー（ビルド後の確認）

```bash
npm run preview
```

### リント（コード品質チェック）

```bash
npm run lint
```

### 型チェック

```bash
npm run typecheck
```

## プロジェクト構成

```
project/
├── src/
│   ├── components/
│   │   └── PoseDetector.tsx    # ポーズ検出メインコンポーネント
│   ├── App.tsx                  # ルートコンポーネント
│   ├── main.tsx                 # エントリーポイント
│   └── index.css                # グローバルスタイル
├── public/                      # 静的ファイル
├── .env                         # 環境変数（非公開）
├── CODING_GUIDELINES.md         # 開発者向けガイドライン
└── README.md                    # このファイル
```

## 使い方

1. アプリケーションを開くとカメラ映像が表示されます
2. カメラの前に立ち、体全体が映るようにします
3. 両手を頭より上に上げます
4. 両手が検出されると「WOW!」の吹き出しがアニメーション表示されます
5. 手を下ろすと吹き出しが消えます

## ポーズ検出の仕組み

このアプリは以下の判定基準で「両手を上げた」と認識します：

- 左手首が左肩より上にある
- 右手首が右肩より上にある
- 両方の手首が鼻の位置より上にある（またはほぼ同じ高さ）

## カスタマイズ

### 検出感度の調整

`src/components/PoseDetector.tsx` の `checkBothHandsRaised` 関数内で、以下の値を調整できます：

```typescript
// 手首が鼻の位置より0.1だけ下でも許容する
const leftHandRaised = leftWrist.y < leftShoulder.y && leftWrist.y < nose.y + 0.1;
```

この `0.1` の値を増やすと検出が緩くなり、減らすと厳しくなります。

### 表示メッセージの変更

`src/components/PoseDetector.tsx` の以下の部分を編集：

```typescript
<div className="...">
  WOW!  {/* ここを変更 */}
</div>
```

### 色の変更

ポーズのランドマーク色を変更するには：

```typescript
drawer.drawLandmarks(lm, {
  color: '#FF00FF',  // ピンク色
  lineWidth: 2,
});

drawer.drawConnectors(lm, PoseLandmarker.POSE_CONNECTIONS, {
  color: '#00FFFF',  // シアン色
  lineWidth: 3,
});
```

## パフォーマンス

- **GPU アクセラレーション**: MediaPipeはGPUを使用して高速処理
- **軽量モデル**: `pose_landmarker_lite` を使用してリアルタイム性能を確保
- **フレーム制御**: `requestAnimationFrame` で滑らかなアニメーション

## ブラウザ対応

- Chrome 90以上
- Firefox 88以上
- Safari 14以上
- Edge 90以上

**注意**: カメラアクセスにはHTTPS接続が必要です（localhost除く）。

## プライバシー

- すべての処理はブラウザ内で完結します
- カメラ映像はサーバーに送信されません
- 個人データは保存されません

## ライセンス

このプロジェクトはプライベートプロジェクトです。

## サポート

問題が発生した場合や質問がある場合は、開発チームにお問い合わせください。

## 今後の拡張予定

- [ ] 複数のポーズパターン認識
- [ ] ポーズのカスタマイズ機能
- [ ] ゲームモードの追加
- [ ] ポーズデータの記録と分析

---

**楽しいポーズ検出を！** 🎉
